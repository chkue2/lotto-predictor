# 🎯 통합 로또 추천기 V14 (최종판)

📌 로또 추천기 및 분석 리포트 생성기

- 최근 전체 로또 데이터 기반
- 전이행렬(Markov) + Monte Carlo 시뮬레이션 활용
- 균형형, 집중형, 혼합형(균형형 + 자유형) 조합 생성
- 행/열/대각선 패턴, 원형 패턴, 형태학 패턴 등 통합 점수 기반 추천
- 중복 없는 상위 10조합 출력
- 과거 번호 등장 빈도, 공출현 행렬, 패턴 점수 시각화 제공

---

## 주요 기능

1. **데이터 로딩 및 전처리**

   - CSV(`lotto_data.csv`)로부터 과거 번호 불러오기
   - 번호 배열화 및 numpy 변환
   - 파일 변경 시 자동 캐시 갱신

2. **전이행렬 기반 분석 (Markov)**

   - 최근 당첨번호와 다음 번호 출현 확률 분석
   - 번호 간 전이 관계 계산

3. **Monte Carlo 시뮬레이션**

   - 후보 번호 5000세트 생성
   - 집중형/균형형 모드 선택 가능
   - 랜덤 퍼트버번트(perturbation) 적용으로 변동성 부여

4. **그룹 기반 후보 생성**

   - 번호를 3개 그룹(1~15, 16~30, 31~45)으로 나누어 조합
   - 연속 숫자(연번) 및 대각선 패턴 제한
   - 행/열 균형 검증

5. **패턴 점수 평가**

   - **V7 패턴**: 행/열/대각선 균형 점수
   - **원형 패턴**: 구간별 번호 다양성
   - **형태학 패턴**: 연속, 대각선 패턴 체크
   - 통합 점수로 상위 후보 선정

6. **최종 조합 생성**

   - 균형형 + 자유형 혼합 가능 (혼합형)
   - 집중형 조합 별도 생성
   - 후보 풀 확대 + 랜덤 가중치 적용으로 다양성 확보
   - 상위 10개 조합 출력

7. **분석 리포트**

   - 과거 데이터 번호 등장 횟수 및 누적 확률 시각화
   - 공출현 번호 행렬 시각화
   - 패턴 점수 비교 그래프
   - 그룹별 등장 횟수 및 조합 간 중복 분석
   - 균형형 vs 집중형 교집합 분석

---

## 설치 및 실행

```bash
pip install -r requirements.txt
streamlit run lotto_predictor_v14.py
```

- `lotto_data.csv` 파일 필요 (과거 번호 1~45)
- Streamlit UI에서 **추천 번호 생성 & 분석 리포트** 버튼 클릭

---

## 출력 예시

✅ 혼합형 추천 10조합 (균형형+자유형)

```
[1, 14, 17, 27, 40, 43] | 효율:0.1518 | V7:53.0 | 원형:55.0 | 형태학:20.0 | 통합:50.6 | 점수:0.4737
...
```

🔥 집중형 추천 10조합

```
[1, 12, 19, 25, 34, 45] | 효율:0.1846 | V7:54.0 | 원형:55.0 | 형태학:20.0 | 통합:50.5 | 점수:0.3637
...
```

- 계산 소요 시간 표시
- UI 내 그래프와 표를 통해 상세 분석 가능
